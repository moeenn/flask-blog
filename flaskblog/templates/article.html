{% extends 'layout.html' %}
{% block content %}
	<section class="section article">
		<div class="container" style="margin-top: 5rem;">
			<h3>{{ post.title.title() }}</h3>

			<small>Author: <i><a href="{{ url_for('profile', user_id=post.user_id) }}">{% if post.author.name == current_user.name %}You{% else %}{{ post.author.name }}{% endif %}</a></i></small>
			<br>
			<small>Published: <i><a href="#">{{ post.date_posted.strftime('%B %d, %Y') }}</a></i></small>
			<br><br>

			<!-- allow updates if user is author -->
			{% if post.user_id == current_user.id %}
				<a class="button" href="{{ url_for('update_article', post_id=post.id ) }}">Update Post</a>
				<button type="button" class="button negative" onclick="confirmation()">Delete Post</button>
				<br>
			{% endif %}

			<!-- confirmation dialogue function -->
			<script type = "text/javascript">
				function confirmation() {
					returnval = confirm('Are you sure you want to delete this post?');

					if (returnval == true) {
						window.location.replace("{{ url_for('delete_article', post_id=post.id) }}");
						return true;
					} 
					return false;
				}
			</script>

			<!-- content of the post -->
			<p>{{ post.content }}</p>
		</div>		
	</section> 
{% endblock content %}